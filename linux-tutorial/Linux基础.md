# 玩转Linux操作系统

> 笔记中的Linux命令都是基于Centos的Linux版本

## 1. 初探Linux

### 1.1 Linux简介


- **类Unix系统：** Linux是一种自由、开放源码的类似Unix的操作系统
- **Linux内核：** 严格来说，Linux这个词本身只表示Linux内核
- **Linux之父：** 一个编程领域的传奇式人物。他是Linux内核的最早作者，随后发起了这个开源项目，担任Linux内核的首要架构师与项目协调者，是当今世界最著名的电脑程序员、黑客之一。他还发起了Git这个开源项目，并为主要的开发者。

### 1.2 Linux诞生简介


- 1991年，芬兰的业余计算机爱好者Linus Torvalds编写了一款类似Minix的系统（基于微内核架构的类Unix操作系统）被ftp管理员命名为Linux 加入到自由软件基金的GNU计划中;
- Linux以一只可爱的企鹅作为标志，象征着敢作敢为、热爱生活。

### 1.3 Linux的分类

**Linux根据原生程度，分为两种：**


1. **内核版本：** Linux不是一个操作系统，严格来讲，Linux只是一个操作系统中的内核。内核是什么？内核建立了计算机软件与硬件之间通讯的平台，内核提供系统服务，比如文件管理、虚拟内存、设备I/O等；
2. **发行版本：** 一些组织或公司在内核版基础上进行二次开发而重新发行的版本。Linux发行版本有很多种（Ubuntu和CentOS用的都很多，初学建议选择CentOS）

## 2. Linux文件系统概览

### 2.1 Linux文件系统简介

**在Linux操作系统中，所有被操作系统管理的资源，例如网络接口卡、磁盘驱动器、打印机、输入输出设备、普通文件或是目录都被看作是一个文件。**也就是说在LINUX系统中有一个重要的概念：**一切都是文件**。其实这是UNIX哲学的一个体现，而Linux是重写UNIX而来，所以这个概念也就传承了下来。在UNIX系统中，把一切资源都看作是文件，包括硬件设备。UNIX系统把每个硬件都看成是一个文件，通常称为设备文件，这样用户就可以用读写文件的方式实现对硬件的访问。

**常见目录说明：**


- **/bin：** 存放二进制可执行文件(ls,cat,mkdir等)，常用命令一般都在这里；
- **/etc：**  存放系统管理和配置文件；
- **/home：**  存放所有用户文件的根目录，是用户主目录的基点，比如用户user的主目录就是/home/user，可以用~user表示；
- **/usr ：** 用于存放系统应用程序；
- **/opt：** 额外安装的可选应用程序包所放置的位置。一般情况下，我们可以把tomcat等都安装到这里；
- **/proc：**  虚拟文件系统目录，是系统内存的映射。可直接访问这个目录来获取系统信息；
- **/root：**  超级用户（系统管理员）的主目录（特权阶级）；
- **/sbin:**  存放二进制可执行文件，只有root才能访问。这里存放的是系统管理员使用的系统级别的管理命令和程序。如ifconfig等；
- **/dev：** 用于存放设备文件；
- **/mnt：** 系统管理员安装临时文件系统的安装点，系统提供这个目录是让用户临时挂载其他的文件系统；
- **/boot：**  存放用于系统引导时使用的各种文件；
- **/lib ：**      存放着和系统运行相关的库文件 ；
- **/tmp：** 用于存放各种临时文件，是公用的临时文件存储点；
- **/var：** 用于存放运行时需要改变数据的文件，也是某些大文件的溢出区，比方说各种服务的日志文件（系统启动日志等。）等；
- **/lost+found：**  这个目录平时是空的，系统非正常关机而留下“无家可归”的文件（windows下叫什么.chk）就在这里。

## 3. Linux基本命令


下面只是给出了一些比较常用的命令。有一个大神自己做的Linux命令网页版在下面

Linux命令大全：[https://wangchujiang.com/linux-command/](https://wangchujiang.com/linux-command/)

### 3.1 查看目录命令

| 命令 | 说明                                       |
| ---- | ------------------------------------------ |
| ls   | 查看当前目录文件信息，只能查看一层目录     |
| tree | 树形结构查看目录文件信息，可以查看多层目录 |
| pwd  | 查看当前目录路径                           |

### 3.2 目录切换命令

| 命令   | 说明                  |
| ------ | --------------------- |
| cd usr | 切换到该目录下usr目录 |
| cd -   | 切换到上一次目录      |
| cd ~   | 切换到用户当前主目录  |
| cd ..  | 切换到上一级目录      |
| cd .   | 切换到当前目录        |

### 3.3目录/文件的操作命令(增删改查)

| 命令                              | 说明                           |
| --------------------------------- | ------------------------------ |
| mkdir 目录名称                    | 创建目录（文件夹）             |
| touch 文件名                      | 创建指定文件                   |
| rm 目录名称/文件名                | 删除目录（文件夹）/文件        |
| mv 目录名称 新目录名称            | 修改目录的名称（改）           |
| mv 目录名称 目录的新位置          | 移动目录的位置---剪切（改）    |
| cp -r 目录名称 目录拷贝的目标位置 | 拷贝目录（改），-r代表递归拷贝 |
| find 目录 参数                    | 寻找目录（查）                 |
| cat/more/less/tail 文件名称       | 文件的查看（查）               |
| vim 文件                          | 修改文件的内容（改）           |

**cat/more/less/tail 文件名称**

- **`cat`：** 查看显示文件内容
- **`more`：** 可以显示百分比，回车可以向下一行， 空格可以向下一页，q可以退出查看
- **`less`：** 可以使用键盘上的PgUp和PgDn向上 和向下翻页，q结束查看
- **`tail-10` ：** 查看文件的后10行，Ctrl+C结束

**vim 文件名**
vim编辑器是Linux中的强大组件，是vi编辑器的加强版，vim编辑器的命令和快捷方式有很多，但此处不一一阐述，大家也无需研究的很透彻，使用vim编辑修改文件的方式基本会使用就可以了。
**在实际开发中，使用vim编辑器主要作用就是修改配置文件，下面是一般步骤：**
vim 文件------>进入文件----->命令模式------>按i进入编辑模式----->编辑文件  ------->按Esc进入底行模式----->输入:wq/q! （输入wq代表写入内容并退出，即保存；输入q!代表强制退出不保存。）

### 3.4 链接命令

| 命令  | 说明                                   |
| ----- | -------------------------------------- |
| ln -s | 创建软链接（相当于创建了一个快捷方式） |
| ln    | 创建硬链接（相当于文件取了一个别名）   |

### 3.5 压缩文件的操作命令

Linux默认支持的压缩格式

- gz
- zip
- bz2

| 命令      | 说明         |
| --------- | ------------ |
| tar -参数 | 压缩和解压缩 |

tar的参数选项：

| 选项 | 说明                               |
| ---- | ---------------------------------- |
| -c   | 创建打包文件                       |
| -v   | 显示打包或者解包的详细信息         |
| -f   | 指定文件名称，必须放到所有选项后面 |
| -z   | 压缩或解压缩（.gz)                 |
| -j   | 压缩或解压缩（.bz2)                |
| -x   | 解包                               |
| -C   | 解压缩到指定目录                   |


### 3.6 Linux的权限命令


操作系统中每个文件都拥有特定的权限、所属用户和所属组。权限是操作系统用来限制资源访问的机制，在Linux中权限一般分为读(readable)、写(writable)和执行(excutable)，分为三组。分别对应文件的属主(owner)，属组(group)和其他用户(other)，通过这样的机制来限制哪些用户、哪些组可以对特定的文件进行什么样的操作。通过 **`ls -l`** 命令我们可以  查看某个目录下的文件或目录的权限

**文件的类型：**


- d： 代表目录
- -： 代表文件
- l： 代表软链接（可以认为是window中的快捷方式）

**Linux中权限分为以下几种：**


- r：代表权限是可读，r也可以用数字4表示
- w：代表权限是可写，w也可以用数字2表示
- x：代表权限是可执行，x也可以用数字1表示

**文件和目录权限的区别：**


对文件和目录而言，读写执行表示不同的意义。


对于文件：

| 权限名称 | 可执行操作 |
| :--- | ---: |
| r | 可以使用cat查看文件的内容 |
| w | 可以修改文件的内容 |
| x | 可以将其运行为二进制文件 |

对于目录：

| 权限名称 | 可执行操作 |
| :--- | ---: |
| r | 可以查看目录下列表 |
| w | 可以创建和删除目录下文件 |
| x | 可以使用cd进入目录 |

**需要注意的是超级用户可以无视普通用户的权限，即使文件目录权限是000，依旧可以访问**。
**在linux中的每个用户必须属于一个组，不能独立于组外。在linux中每个文件有所有者、所在组、其它组的概念。**


- **所有者**
一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者，用ls ‐ahl命令可以看到文件的所有者 也可以使用chown 用户名  文件名来修改文件的所有者 。
- **文件所在组**
当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组 用ls ‐ahl命令可以看到文件的所有组 也可以使用chgrp  组名  文件名来修改文件所在的组。
- **其它组**
除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组

**修改文件/目录的权限的命令：`chmod`**

### 3.7 Linux 用户管理


Linux系统是一个多用户多任务的分时操作系统，任何一个要使用系统资源的用户，都必须首先向系统管理员申请一个账号，然后以这个账号的身份进入系统。用户的账号一方面可以帮助系统管理员对使用系统的用户进行跟踪，并控制他们对系统资源的访问；另一方面也可以帮助用户组织文件，并为用户提供安全性保护。

**Linux用户管理相关命令:**


- `useradd 选项 用户名`:添加用户账号
- `userdel 选项 用户名`:删除用户帐号
- `usermod 选项 用户名`:修改帐号
- `passwd 用户名`:更改或创建用户的密码
- `passwd -S 用户名` :显示用户账号密码信息
- `passwd -d 用户名`:  清除用户密码

useradd命令用于Linux中创建的新的系统用户。useradd可用来建立用户帐号。帐号建好之后，再用passwd设定帐号的密码．而可用userdel删除帐号。使用useradd指令所建立的帐号，实际上是保存在/etc/passwd文本文件中。


passwd命令用于设置用户的认证信息，包括用户密码、密码过期时间等。系统管理者则能用它管理系统用户的密码。只有管理者可以指定用户名称，一般用户只能变更自己的密码。


### 3.8 Linux系统用户组的管理


每个用户都有一个用户组，系统可以对一个用户组中的所有用户进行集中管理。不同Linux 系统对用户组的规定有所不同，如Linux下的用户属于与它同名的用户组，这个用户组在创建用户时同时创建。


用户组的管理涉及用户组的添加、删除和修改。组的增加、删除和修改实际上就是对/etc/group文件的更新。


**Linux系统用户组的管理相关命令:**


- `groupadd 选项 用户组` :增加一个新的用户组
- `groupdel 用户组`:要删除一个已有的用户组
- `groupmod 选项 用户组` : 修改用户组的属性

### 3.9 远程操作命令

| 命令 | 说明     |
| ---- | -------- |
| ssh  | 远程登录 |
| scp  | 远程拷贝 |



### 3.10 其他常用命令


- **`pwd`：** 显示当前所在位置
- **`grep 要搜索的字符串 要搜索的文件 --color`：** 搜索命令，--color代表高亮显示

   - -i:忽略大小写
   - -n:显示匹配行号
   - -v：显示不包含匹配行的所有行
- **`ps -ef`/`ps -aux`：** 这两个命令都是查看当前系统正在运行进程，两者的区别是展示格式不同。如果想要查看特定的进程可以使用这样的格式：**`ps aux|grep redis`** （查看包括redis字符串的进程），也可使用 `pgrep redis -a`。
注意：如果直接用ps（（Process Status））命令，会显示所有进程的状态，通常结合grep命令查看某进程的状态。
- **`kill -9 进程的pid`：** 杀死进程（-9 表示强制终止。）
先用ps查找进程，然后用kill杀掉
- **网络通信命令：**
   - 查看当前系统的网卡信息：ifconfig
   - 查看与某台机器的连接情况：ping
   - 查看当前系统的端口使用：netstat -an
- **`shutdown`：**  `shutdown -h now`： 指定现在立即关机；`shutdown +5 "System will shutdown after 5 minutes"`:指定5分钟后关机，同时送出警告信息给登入用户。
- **`reboot`：**  **`reboot`：**  重开机。**`reboot -w`：** 做个重开机的模拟（只有纪录并不会真的重开机）。

###  后记

Linux之Find命令的使用示例：

```bash
(1)find / -name httpd.conf　　#在根目录下查找文件httpd.conf，表示在整个硬盘查找
(2)find /etc -name httpd.conf　　#在/etc目录下文件httpd.conf
(3)find /etc -name '*srm*'　　#使用通配符*(0或者任意多个)。表示在/etc目录下查找文件名中含有字符串‘srm’的文件
(4)find . -name 'srm*' 　　#表示当前目录下查找文件名开头是字符串‘srm’的文件按照文件特征查找
(1)find / -amin -10 　　# 查找在系统中最后10分钟访问的文件(access time)
(2)find / -atime -2　　 # 查找在系统中最后48小时访问的文件
(3)find / -empty 　　# 查找在系统中为空的文件或者文件夹
(4)find / -group cat 　　# 查找在系统中属于 group为cat的文件
(5)find / -mmin -5 　　# 查找在系统中最后5分钟里修改过的文件(modify time)
(6)find / -mtime -1 　　#查找在系统中最后24小时里修改过的文件
(7)find / -user fred 　　#查找在系统中属于fred这个用户的文件
(8)find / -size +10000c　　#查找出大于10000000字节的文件(c:字节，w:双字，k:KB，M:MB，G:GB)
(9)find / -size -1000k 　　#查找出小于1000KB的文件
```

