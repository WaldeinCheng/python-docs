Vim命令详解

---

> 首先来说，vim编辑器是Linux操作系统的一大利器，是学习Linux的必要知识点。
>
> 其次，就是内容过多，只记录常用的部分。

### 认识VIM

Vim的四种模式：

- 正常模式 (Normal-mode)
- 插入模式 (Insert-mode)
- 命令模式 (Command-mode)
- 可视模式 (Visual-mode)

实际使用中，不需要分那么细，插入模式也就是编辑模式，对文件里的内容进行修改，也是最为重要的功能。

其他三种模式也就是浏览，复制，删除文件的一些操作，进入编辑模式和退出模式的一系列操作。

### 打开/创建文件

```bash
# 首先同时打开两个文件，空格隔开即可，没有则创建
vim file1 file2 
# 页面显示的是第一个文件的界面file1,展示和切换命令如下,处于命令模式下：
:ls # 列举当前打开的文件信息
:b2 # 切换到第二个文件，后面的2是参数
```

### 编辑文件

也就是编辑器的主要功能，编辑文件，最多的场景就是从正常模式进入到插入模式。

| 键盘符     | 说明                                                   |
| ---------- | ------------------------------------------------------ |
| `i`        | 是在光标所在的字符之前插入需要录入的文本。             |
| `I`        | 是在光标所在行的**行首**插入需要录入的文本。           |
| `a`        | 是在光标所在的字符之后插入需要录入的文本。             |
| `A`        | 是在光标所在行的行尾插入需要录入的文本。               |
| `o`        | 是光标所在行的**下一行行首**插入需要录入的文本。       |
| `O`        | 是光标所在行的**上一行行首**插入需要录入的文本。       |
| `s`        | 删除光标所在处的字符然后插入需要录入的文本。           |
| `S`        | 删除光标所在行，在当前行的行首开始插入需要录入的文本。 |
| `cw`       | 删除从光标处开始到该单词结束的所有字符                 |
| `Ctrl+n/p` | 编辑模式下的代码提示功能                               |

### 正常模式

正常模式下多的就是移动光标，然后进入编辑模式。

| 键盘符   | 说明                                    |
| -------- | --------------------------------------- |
| `h,l`    | 向左/向右移动光标                       |
| `j,k`    | 向下/向上移动光标                       |
| `0 `     | 移动到行头                              |
| `^`      | 移动到本行的第一个不是空白字符          |
| `$`      | 移动到行尾                              |
| `g_`     | 移动到本行最后一个不是 blank 字符的位置 |
| `w`      | 光标移动到下一个单词的开头              |
| `e`      | 光标移动到下一个单词的结尾              |
| `nG `    | 光标定位到第 n 行的行首                 |
| `gg `    | 光标定位到第一行的行首                  |
| `G `     | 光标定位到最后一行的行首                |
| `H `     | 光标定位到当前屏幕的第一行行首          |
| `ctrl+f` | 查看下一页内容                          |
| `ctrl+b` | 查看上一页内容                          |

正常模式下的**复制，粘贴，删除**

| 命令  | 说明                                   |
| ----- | -------------------------------------- |
| `dw`  | 删除一个单词                           |
| `dnw` | 删除 n 个单词                          |
| `dd`  | 删除一整行                             |
| `ndd` | 删除光标处开始的 n 行                  |
| `d$`  | 删除光标到本行的结尾                   |
| `dH`  | 删除屏幕显示的第一行文本到光标所在的行 |
| `dG`  | 删除光标所在行到文本的结束             |
| `yw`  | 复制一个单词                           |
| `ynw` | 复制n个单词                            |
| `yfa` | 复制光标到下一个 a 的字符处            |
| `yy`  | 复制一行                               |
| `nyy` | 复制光标开始处开始的n行                |
| `y$`  | 复制光标到本号的结尾                   |
| `yH`  | 复制屏幕显示的第一行文本到光标所在的行 |
| `yG`  | 复制光标所在行到文本的结束             |
| `p`   | 在光标后开始粘贴                       |
| `P`   | 大写的 P 光标前开始复制                |

### 命令模式

命令模式下最常用的就是编辑之后的退出。

| 命令    | 说明                                       |
| ------- | ------------------------------------------ |
| :w      | 保存当前对文件的修改，但是不退出文件       |
| :w!     | 强制保存但是不退出文件                     |
| :w file | 保存当前的文件修改到 file 文件当中         |
| :q!     | 退出文件，对文件的修改不做保存             |
| :qa!    | 退出所有的文件，对所有的文件修改都不做保存 |
| :wq     | **退出文件并保存对文件的修改**             |
| :x      | 退出文件并保存对文件的修改                 |

命令模式下还可以查找，替换功能

| 命令                                    | 说明                                                         |
| --------------------------------------- | ------------------------------------------------------------ |
| :/字符串                                | 在文本中查找字符串                                           |
| :n1,n2d                                 | n1 和 n2 指的是起始行号和结束行号，d 是删除关键字            |
| :{作用范围}s/{目标}/{替换}/{替换的标志} | :%s/zempty/handsome/g：将会把全文中的 zempty 替换成 handsome |

